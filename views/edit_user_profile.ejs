<% include header %>

    <title>
        <%= title %>
    </title>
    
    </head>

    <body>
        <div class="container">

            <div class="text-center mt-5">
                <h1>
                    <%= title %>
                </h1>
            </div>

            <div class="col-md-4 col-sm-12" style="margin: auto;">


                <form action="/user/profile/edit/<%= user._id %>" method="post" enctype="multipart/form-data">

                    <% if (typeof error != "undefined"){ %>
                        <p class="text-danger text-center">
                            <%= error %>
                        </p>
                        <% } %>

                            <div class="form-group">
                                <label for="inputUsername">Username</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <span class="oi oi-person"></span>
                                        </span>
                                    </div>

                                    <input type="text" class="form-control" id="inputUsername" placeholder="Name" name="username" value="<%= user.name %>" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="inputEmail">Email</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <span class="oi oi-envelope-closed"></span>
                                        </span>
                                    </div>
                                    <input type="email" class="form-control" id="inputEmail" placeholder="Email" name="email" value="<%= user.email %>" required>
                                </div>
                            </div>

                            <div class="text-center">
                                <img class="#" id="imgProfile" src="<%= user.image.path %>" alt="image preview" width="180px" height="140px" style="border-radius: 4px">
                            </div>

                            <div class="form-group">
                                <label for="chooseFile">Choose image</label>
                                <input type="file" onchange="readUrl(this)" class="form-control-file" id="chooseFile" name="imageFile">
                            </div>

                            <button type="submit" class="btn btn-primary float-right mt-3 px-3"> update</button>
                </form>


            </div>
        </div>

        <script>
            function readUrl(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#imgProfile')
                            .attr('src', e.target.result)
                            .width(180)
                            .height(140);
                    };

                    reader.readAsDataURL(input.files[0]);
                }
            }</script>
    </body>

    </html>